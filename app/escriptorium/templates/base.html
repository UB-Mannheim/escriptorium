{% load i18n language_flags_tags static %}<!DOCTYPE html>
{% get_current_language as LANGUAGE_CODE %}<html lang="{{ LANGUAGE_CODE }}" data-bs-theme="dark">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>eScriptorium - {% block head_title %}Digital Library{% endblock %}</title>

    {% comment %}
    <meta name="description" content="">
    <meta name="author" content="">
    {% endcomment %}
    <link rel="icon" href="{% static "images/favicon.ico" %}">
    <!-- Preconnect to Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    {% block styles %}
    <link href="{% static 'vendor.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'main.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'globalNavigation.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'css/flags.css' %}" rel="stylesheet" type="text/css">
    {% endblock styles %}
    {% block extrastyle %}{% endblock extrastyle %}
  </head>
  <body id="escriptorium" class="escr-body {% block bodyclass %}{% endblock %}">
    <div id="vue-global-nav">
      <global-navigation
        :is-authenticated="{% if user.is_authenticated %}true{% else %}false{% endif %}"
        :search-disabled="{% if DISABLE_ELASTICSEARCH %}true{% else %}false{% endif %}"
      ></global-navigation>
    </div>

    <main><section>
    <div id="main" class="container-fluid{% if not request.user.legacy_mode %} escr-vue-enabled{% endif %}">
    {% block body %}
    {% endblock body %}
    </div>
    </section></main>

    <script src="{% static 'vendor.js' %}"></script>

    {% block scripts %}
    <script src="{% static 'main.js' %}"></script>
    <script src="{% static 'globalNavigation.js' %}"></script>
    <script>
     const DEBUG = {% if debug %}true{% else %}false{% endif %};
    </script>
    {% if user.is_authenticated %} {# no need to open a socket for anonymous users, bots etc #}
      <script>
        $(document).ready(function(){
          bootWebsocket();
        });
      </script>
      {% include 'includes/messages.html' %}
      {% if ENABLE_COOKIE_CONSENT %}
      <script>
        userProfile.setUserId({{ request.user.id }});
        userProfile.getCookieConsent();
      </script>
      {% endif %}
    {% endif %}
    {% endblock scripts %}
    {% block extrascript %}{% endblock extrascript %}
  </body>
</html>
